<!doctype html>

<head>
	<meta charset="utf-8" />
	<title>Devastator (VADR runner)</title>
    <link rel="stylesheet" type="text/css" href="css/vadr_frontend.css"/>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript" src="js/start_run.js"></script>
    <script type="text/javascript" src="js/setup_nav.js"></script>
    <script type="text/javascript" src="js/past_runs.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <html lang="en">
</head>

<div class="topnav", id="topnav">
    <p id="vadr_welcome">Welcome to Devastator (a VADR web app)</p>
    <a id="new_run">Submit New Run</a>
    <a id="past_run">View Past Runs</a>
</div>

<body id="main">
    <div id="past_run_div" style="display:none">
        <h1>Get your past VADR runs</h1>
        <form name="get_past_runs" id="get_past_runs" action="" required>
            <input type="text" name="past_user_email" id="past_user_email" value="" autofocus="autofocus" placeholder="Enter an email address" required/>
            <input name="past_run_submit" type="submit" id="past_run_submit" value="get runs" required>
        </form>
        <section id='past_runs_body' style="display:none">
            <form name="get_past_run_annotation" id="get_past_runs_annotation" action="">
                <input type="text" name="past_run_id" id="past_run_id" value="" autofocus="autofocus" placeholder="Enter a run ID"/>
                <input name="past_run_annotation_submit" type="submit" id="past_run_annotation_submit" value="get annotations">
            </form>
            <table>
                <h2> Your past runs... </h2>
                <thead>
                <tr>
                    <td>Run ID</td>
                    <td>Sequence Name</td>
                    <td>Sequence Length</td>
                    <td>VADR Status</td>
                    <td>Sequence</td>
                </tr>
                </thead>
                <tbody id="past_runs_table_body">
                    <!-- this will be filled in by javascript when there are results -->
                </tbody>
            </table>
            <table>
                <h2>Sequence annotations for run <span id='past_run_annotation_id'>0</span></h2>
                <thead>
                <tr>
                    <td>Feature type</td>
                    <td>Name</td>
                    <td>Start position</td>
                    <td>End position</td>
                    <td>Feature sequence coordinates</td>
                    <td>VADR alerts</td>
                </tr>
                </thead>
                <tbody id="past_run_annotations_table_body">
                    <!-- this will be filled in by javascript when there are results -->
                </tbody>
            </table>
        </section>
    </div>
    <div id="new_run_div">
        <h1>Submit sequence to VADR</h1>
        <form name="start_run" id="start_run" action="" required>
            <input name="user_email" id="user_email" value="" autofocus="autofocus" placeholder="Enter an email address" required/>
            <input name="sequence_name" id="sequence_name" value="" placeholder="Enter a sequence name" required/>
            <input name="sequence_dna" id="sequence_dna" placeholder="Enter a sequence" required/>
            <input name="submit" type="submit" id="submit" value="submit sequence">
        </form>
        <div id='in_progress' style="display:none">
            <p>Your job has been submitted with process ID...</p>
            <p><span id='job_id'>0</span></p>
            <p>Please wait for the check status button to appear below...</p>
            <div id="countdown"></div>
            <p></p>
            <button id="status_button" type="button" style="display:none">click me to check job status</button>
            <h2 id="job_finished" style="display:none">Your job has finished!</h2>
        </div>
        <section id='results'>
            <h1>VADR results </h1>
            <p>VADR sequence validation status: <span id='vadr_status'>0</span></p>
            <p>Model used: <span id='model_used'>0</span></p>
            <p>Sequence length: <span id='seq_length'>0</span></p>
            
            <table>
                <thead>
                <h2>Sequence annotations</h2>
                <tr>
                    <td>Feature type</td>
                    <td>Name</td>
                    <td>Start position</td>
                    <td>End position</td>
                    <td>Feature sequence coordinates</td>
                    <td>VADR alerts</td>
                </tr>
                </thead>
                <tbody id="results_table">
                    <!-- this will be filled in by javascript when there are results -->
                </tbody>
            </table>
        </section>
    </div>
</body>

<script>
    setupTopNav();
</script>

</html>
